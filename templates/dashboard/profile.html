{% extends "base_dashboard.html" %}

{% block content %}
  <div class="right_col" role="main">
    <div class="col-xs-4 col-xs-offset-4" style="margin-bottom: 50px;">
      <div class="text-center admin_content">
        <h3>Perfil</h3>
        {% for message in messages %}
          <div class="alert {{ message.tags }}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    </div>
    <div class="col-xs-10 col-xs-offset-1">
      <form method="post">
        {% csrf_token %}
        <div class="list list-profile">
          <div class="list-item">
            <div class="row">
              <div class="col-xs-3">
                  <strong>Estatus</strong>
              </div>
              <div class="col-xs-9">
                {% if user.verified %}
                  <p style="color:green"><i class="fa fa-check"></i> Verificado</p>
                {% elif not user.canVerify %} 
                  <p style="color:orange"> Por verificar</p>
                {% else %}
                  <div class="list-action">
                    <a href="{% url 'userVerification' %}">
                      <p style="color:red; text-decoration: underline;"><i class="fa fa-warning"></i> Falta verificación</p>
                    </a>
                  </div>
                {% endif %}
              </div>
            </div>
          </div>


          <div class="list-item">
            <div class="row" id="email">
              <div class="col-xs-3">
                <p class="list-title">
                  <strong>Email</strong>
                </p>
              </div>
              <div class="col-xs-7">
                <p class="list-content"> {{user.email}} </p>
              </div>
              <div class="col-xs-2">
                <div class="list-action">
                  <a href="#" onclick="edit('email')">
                    <span>Editar</span>
                  </a>
                </div>
              </div>
            </div>
            <div id="edit_email" style="display: none">
              <div class="row">
                <div class="col-xs-3">
                  <p class="list-title">
                    <strong>Email</strong>
                  </p>
                </div>
                <div class="col-xs-9">
                  <input type="email" name="email" id="input_email" placeholder='{{user.email}}' class="form-control">
                </div>
              </div>
              <br>
              <div class="row ">
                <div class="col-xs-9 col-xs-offset-3">
                  <button type="submit" class="btn btn-primary">Guardar</button>
                  <button type="button" onclick="cancel('email')" class="btn btn-primary">Cancelar</button>
                </div>
              </div>
            </div>
          </div>
          
          <div class="list-item">
            <div class="row" id="password">
              <div class="col-xs-3">
                <p class="list-title">
                  <strong>Contraseña</strong>
                </p>
              </div>
              <div class="col-xs-7">
                <p class="list-content"> </p>
              </div>
              <div class="col-xs-2">
                <div class="list-action">
                  <a href="#" onclick="edit('password')">
                    <span>Editar</span>
                  </a>
                </div>
              </div>
            </div>
            <div id="edit_password" style="display: none">
              <div class="row">
                <div class="col-xs-3">
                  <p class="list-title">
                    <strong>Contraseña</strong>
                  </p>
                </div>
                <div class="col-xs-9">
                  <input type="password" name="old_password"  id="old_password" placeholder='Contraseña actual' class="form-control"> <br>
                  <input type="password" name="new_password1" id="new_password1" placeholder='Nueva contraseña' class="form-control"> <br>
                  <input type="password" name="new_password2" id="new_password2" placeholder='Repita la contraseña' class="form-control">
                </div>
              </div>
              <br>
              <div class="row ">
                <div class="col-xs-9 col-xs-offset-3">
                  <button type="submit" class="btn btn-primary">Guardar</button>
                  <button type="button" onclick="cancel('password')" class="btn btn-primary">Cancelar</button>
                </div>
              </div>
            </div>
          </div>

          <div class="list-item">
            <div class="row">
              <div class="col-xs-3">
                  <strong>Nombre</strong>
              </div>
              <div class="col-xs-7">
                <p> {{ user.first_name}}  </p>
              </div>
            </div>
          </div>

          <div class="list-item">
            <div class="row">
              <div class="col-xs-3">
                  <strong>Apellido</strong>
              </div>
              <div class="col-xs-7">
                <p> {{ user.last_name}}  </p>
              </div>
            </div>
          </div>

          <div class="list-item">
            <div class="row">
              <div class="col-xs-3">
                  <strong>DNI</strong>
              </div>
              <div class="col-xs-7">
                <p> {{ user.id_number }}  </p>
              </div>
            </div>
          </div>

          <div class="list-item last-child">
            <div class="row">
              <div class="col-xs-3">
                  <strong>Teléfono</strong>
              </div>
              <div class="col-xs-7">
                <p> {{ user.mobile_phone }}  </p>
              </div>
            </div>
          </div>

        </div>
      </form>
    </div>
  </div>
  <script type="text/javascript">

    edit = function(name){
      cancel('email')
      cancel('password')
      $('#'+name).hide()
      $('#edit_'+name).show()
    }

    cancel = function(name){
      $('#'+name).show()
      $('#edit_'+name).hide()

      $('#input_email').val("")
      $('#old_password').val("")
      $('#new_password2').val("")
      $('#new_password1').val("")
    }

  </script>
{% endblock content %}